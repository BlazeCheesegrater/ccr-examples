Bootstrap: docker
From: rocker/tidyverse:latest

%labels
    Maintainer YourName
    Version v1.0

%post
    ## Install required Linux packages
    apt-get update && apt-get install -y \
        libxml2-dev \
        libssl-dev \
        libcurl4-openssl-dev \
        libhdf5-dev \
        libcairo2-dev \
        libxt-dev \
        libglpk-dev \
        libharfbuzz-dev \
        libfribidi-dev \
        libfreetype6-dev \
        fonts-dejavu-core \
        && apt-get clean

    ## Install Bioconductor and Seurat dependencies in R
    Rscript -e "install.packages(c('remotes', 'Seurat', 'patchwork', 'ggplot2', 'cowplot'))"

    ## Optional: Install extra single-cell packages
    Rscript -e "BiocManager::install(c('SingleCellExperiment', 'scater', 'scran', 'biomaRt'))"

%environment
    export R_LIBS_USER=/usr/local/lib/R/site-library
    export PATH=/usr/local/bin:$PATH

%runscript
    echo "Launching R..."
    exec R
